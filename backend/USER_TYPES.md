# –¢–∏–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∫–ª–∏–µ–Ω—Ç–æ–≤)

Backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å 10 —Ç–∏–ø–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–∞–Ω–∫–∞. –ö–∞–∂–¥—ã–π —Ç–∏–ø –∏–º–µ–µ—Ç —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –≤–∏–¥–∞ `team053-X`, –≥–¥–µ X - –Ω–æ–º–µ—Ä –æ—Ç 1 –¥–æ 10.

## –°–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤

| User ID | –ò–∫–æ–Ω–∫–∞ | –¢–∏–ø –∫–ª–∏–µ–Ω—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã |
|---------|--------|-------------|----------|-------------------|
| `team053-1` | üë®‚Äçüíº | **employee** (–æ–±—ã—á–Ω—ã–π) | –û–±—ã—á–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ | –ë–∞–∑–æ–≤—ã–µ —Å—á–µ—Ç–∞, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã |
| `team053-2` | üíé | **vip** (–¥–µ–ø–æ–∑–∏—Ç 500k-2MP) | VIP –∫–ª–∏–µ–Ω—Ç —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º | VIP –¥–µ–ø–æ–∑–∏—Ç—ã 500k-2MP |
| `team053-3` | üè¢ | **entrepreneur** (–∫—Ä–µ–¥–∏—Ç 500k-2MP) | –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å | –ö—Ä–µ–¥–∏—Ç—ã –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ 500k-2MP |
| `team053-4` | üèõÔ∏è | **business/–û–û–û** | –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ | –ë–∏–∑–Ω–µ—Å-—Å—á–µ—Ç–∞, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã |
| `team053-5` | üéì | **student** | –°—Ç—É–¥–µ–Ω—Ç | –°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–µ —Å—á–µ—Ç–∞, –ª—å–≥–æ—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è |
| `team053-6` | üë¥ | **pensioner** (–¥–µ–ø–æ–∑–∏—Ç) | –ü–µ–Ω—Å–∏–æ–Ω–µ—Ä | –ü–µ–Ω—Å–∏–æ–Ω–Ω—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã, —Å–ø–µ—Ü. —É—Å–ª–æ–≤–∏—è |
| `team053-7` | üí≥ | **employee** (–¥–µ–±–µ—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞) | –°–æ—Ç—Ä—É–¥–Ω–∏–∫ | –î–µ–±–µ—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã |
| `team053-8` | üí≥ | **employee** (–∫—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞) | –°–æ—Ç—Ä—É–¥–Ω–∏–∫ | –ö—Ä–µ–¥–∏—Ç–Ω—ã–µ –∫–∞—Ä—Ç—ã |
| `team053-9` | üè¢ | **entrepreneur** (–º–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤) | –ê–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ |
| `team053-10` | üëë | **vip premium** (–í–°–ï –ø—Ä–æ–¥—É–∫—Ç—ã) | VIP Premium –∫–ª–∏–µ–Ω—Ç | –í–°–ï –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã |

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Frontend (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø)
    ‚Üì
Backend (–ø–µ—Ä–µ–¥–∞–µ—Ç user_id –≤ –±–∞–Ω–∫)
    ‚Üì
Banking API (–ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ç–∏–ø–∞ –∫–ª–∏–µ–Ω—Ç–∞)
    ‚Üì
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—É
```

### 2. Backend –Ω–µ –∑–Ω–∞–µ—Ç –æ —Ç–∏–ø–∞—Ö

**–í–ê–ñ–ù–û**: Backend **–ù–ï —Ä–µ–∞–ª–∏–∑—É–µ—Ç** –ª–æ–≥–∏–∫—É —Ç–∏–ø–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤. –û–Ω –ø—Ä–æ—Å—Ç–æ:
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `user` –ø–∞—Ä–∞–º–µ—Ç—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `team053-1`)
- –ü–µ—Ä–µ–¥–∞–µ—Ç –µ–≥–æ –≤ –±–∞–Ω–∫–æ–≤—Å–∫–æ–µ API –∫–∞–∫ `client_id`
- –ë–∞–Ω–∫–æ–≤—Å–∫–æ–µ API —Å–∞–º–æ –∑–Ω–∞–µ—Ç, –∫–∞–∫–æ–π —ç—Ç–æ —Ç–∏–ø –∫–ª–∏–µ–Ω—Ç–∞
- –ë–∞–Ω–∫–æ–≤—Å–∫–æ–µ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ

### 3. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°–æ–∑–¥–∞–Ω–∏–µ consent –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ (team053-5)

```bash
curl -X POST "http://localhost:8080/api/consents?bank=vbank&user=team053-5"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "ok": true,
  "bank": "vbank",
  "user": "team053-5",
  "consent_id": "consent-abc123",
  "message": "Consent created successfully"
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—á–µ—Ç–æ–≤ VIP –∫–ª–∏–µ–Ω—Ç–∞ (team053-2)

```bash
curl "http://localhost:8080/api/accounts?bank=vbank&user=team053-2"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "accounts": [
    {
      "id": "acc-vip-001",
      "bank": "vbank",
      "type": "VIP_ACCOUNT",
      "currency": "RUB",
      "balance": 1500000.00
    }
  ]
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è VIP Premium (team053-10)

```bash
curl "http://localhost:8080/api/products?bank=vbank&user=team053-10&type=DEPOSIT"
```

**–û—Ç–≤–µ—Ç:** –í–°–ï –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã, –≤–∫–ª—é—á–∞—è VIP –∏ –ø—Ä–µ–º–∏—É–º –ø—Ä–æ–¥—É–∫—Ç—ã

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```powershell
# Windows PowerShell
.\test_users.ps1
```

```bash
# Linux/macOS
./test_users.sh
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ backend:**
   ```bash
   go run .
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ consent –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   ```bash
   curl -X POST "http://localhost:8080/api/consents?bank=vbank&user=team053-X"
   ```
   –ó–∞–º–µ–Ω–∏—Ç–µ `X` –Ω–∞ –Ω–æ–º–µ—Ä –æ—Ç 1 –¥–æ 10

3. **–ü–æ–ª—É—á–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:**
   ```bash
   # –°—á–µ—Ç–∞
   curl "http://localhost:8080/api/accounts?bank=vbank&user=team053-X"

   # –ü—Ä–æ–¥—É–∫—Ç—ã
   curl "http://localhost:8080/api/products?bank=vbank&user=team053-X&type=DEPOSIT"

   # –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
   curl "http://localhost:8080/api/transactions?bank=vbank&user=team053-X"
   ```

## API Endpoints —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏—è (consent)

```http
POST /api/consents?bank=vbank&user=team053-1
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—á–µ—Ç–æ–≤

```http
GET /api/accounts?bank=vbank&user=team053-1
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

```http
GET /api/accounts/{accountId}/balances?bank=vbank&user=team053-1
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

```http
GET /api/accounts/{accountId}/transactions?bank=vbank&user=team053-1
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

```http
GET /api/products?bank=vbank&user=team053-1&type=DEPOSIT
GET /api/products?bank=vbank&user=team053-1&type=LOAN
GET /api/products?bank=vbank&user=team053-1&type=CARD
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞

```http
POST /api/payment-consents?bank=vbank&user=team053-1
Content-Type: application/json

{
  "debtor_account": {"identification": "40817810099910004312"},
  "instructed_amount": {"amount": "1000.00", "currency": "RUB"},
  "creditor_account": {"identification": "40817810099910005678"}
}
```

### –û—Ç–∫—Ä—ã—Ç–∏–µ –≤–∫–ª–∞–¥–∞/–∫—Ä–µ–¥–∏—Ç–∞

```http
POST /api/agreements?bank=vbank&user=team053-1
Content-Type: application/json

{
  "product_id": "prod-deposit-001",
  "amount": {"amount": "50000.00", "currency": "RUB"}
}
```

## –†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤

### –û–±—ã—á–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ (team053-1)
- –ë–∞–∑–æ–≤—ã–µ —Ç–µ–∫—É—â–∏–µ —Å—á–µ—Ç–∞
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã (–¥–æ 500k)
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫—Ä–µ–¥–∏—Ç—ã (–¥–æ 500k)

### VIP –∫–ª–∏–µ–Ω—Ç (team053-2)
- VIP —Å—á–µ—Ç–∞ —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º
- –î–µ–ø–æ–∑–∏—Ç—ã 500k - 2MP
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä

### –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å (team053-3)
- –ë–∏–∑–Ω–µ—Å-—Å—á–µ—Ç–∞
- –ö—Ä–µ–¥–∏—Ç—ã –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ 500k - 2MP
- –õ—å–≥–æ—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –ò–ü

### VIP Premium (team053-10)
- –í–°–ï —Ç–∏–ø—ã —Å—á–µ—Ç–æ–≤
- –í–°–ï —Ç–∏–ø—ã –¥–µ–ø–æ–∑–∏—Ç–æ–≤
- –í–°–ï —Ç–∏–ø—ã –∫—Ä–µ–¥–∏—Ç–æ–≤
- –í–°–ï —Ç–∏–ø—ã –∫–∞—Ä—Ç
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Backend - —ç—Ç–æ –ø—Ä–æ–∫—Å–∏ —Å–ª–æ–π**: Backend –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É —Ç–∏–ø–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤. –û–Ω —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –±–∞–Ω–∫–æ–≤—Å–∫–æ–µ API.

2. **–ë–∞–Ω–∫–æ–≤—Å–∫–æ–µ API –∑–Ω–∞–µ—Ç —Ç–∏–ø—ã**: –í—Å—è –ª–æ–≥–∏–∫–∞ –æ —Ç–æ–º, –∫–∞–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∫–∞–∫–æ–º—É —Ç–∏–ø—É –∫–ª–∏–µ–Ω—Ç–∞, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –±–∞–Ω–∫–æ–≤—Å–∫–æ–º API.

3. **–û–¥–∏–Ω TEAM_ID, –º–Ω–æ–≥–æ client_id**:
   - `TEAM_ID=team053` - —ç—Ç–æ –≤–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞
   - `client_id=team053-1` –¥–æ `team053-10` - —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã

4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π consent**: Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∏ –∫—ç—à–∏—Ä—É–µ—Ç consent –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ.

## Troubleshooting

### –û—à–∏–±–∫–∞: "No accounts found"

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ:
1. Consent –±—ã–ª —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
2. User ID —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ (team053-1 –¥–æ team053-10)
3. –ë–∞–Ω–∫–æ–≤—Å–∫–æ–µ API –¥–æ—Å—Ç—É–ø–Ω–æ

### –û—à–∏–±–∫–∞: "Invalid user"

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `team053-1`, `team053-10`
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `team053`, `team-1`, `team053-11`

### –†–∞–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –ö–∞–∂–¥—ã–π —Ç–∏–ø –∫–ª–∏–µ–Ω—Ç–∞ –∏–º–µ–µ—Ç —Ä–∞–∑–Ω—ã–µ —Å—á–µ—Ç–∞, –ø—Ä–æ–¥—É–∫—Ç—ã –∏ –ª–∏–º–∏—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –ø–æ–ª–∏—Ç–∏–∫–µ.
